<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>网红模拟经营游戏</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- 游戏主容器 -->
    <div id="game-container">
        
        <!-- 起名界面 -->
        <div id="naming-screen" class="screen active">
            <div class="content-box">
                <h1 class="title">网红模拟经营</h1>
                <p class="subtitle">起号包装：昵称、性别、头像、属性一键到位</p>
                <div class="setup-steps">
                    <span class="step active">1 昵称</span>
                    <span class="step">2 定位</span>
                    <span class="step">3 头像</span>
                    <span class="step">4 属性</span>
                </div>
                <div class="input-group">
                    <input type="text" id="influencer-name" placeholder="请输入账号昵称（2-10个字符）" maxlength="10">
                    <p class="tip" id="name-tip">名字不能包含违规词汇</p>
                </div>
                <div class="name-actions">
                    <button class="btn btn-secondary btn-inline" id="random-name-btn">随机花名</button>
                </div>
                <div class="gender-panel">
                    <div class="gender-header">账号定位</div>
                    <div id="gender-list" class="gender-list">
                        <label class="gender-item"><input type="radio" name="gender" value="male"> 男</label>
                        <label class="gender-item"><input type="radio" name="gender" value="female"> 女</label>
                    </div>
                    <p class="tip" id="gender-tip">请选择性别</p>
                </div>
                <div class="avatar-panel">
                    <div class="avatar-header">头像风格</div>
                    <div id="avatar-list" class="avatar-list"></div>
                    <p class="tip" id="avatar-tip">请选择头像</p>
                </div>
                <div class="attribute-panel">
                    <div class="attribute-header">账号属性</div>
                    <button class="btn btn-secondary roll-attr-first" id="roll-attr-btn">随机生成属性</button>
                    <p class="tip" id="attr-tip">点击上方按钮随机分配属性点，再点击「起号」</p>
                    <div id="attribute-list" class="attribute-list">
                        <!-- 动态生成属性 -->
                    </div>
                </div>
                <button class="btn btn-primary" id="confirm-name-btn">起号</button>
            </div>
        </div>

        <!-- 类别选择界面 -->
        <div id="category-screen" class="screen">
            <div class="content-box">
                <h1 class="title">选择你的发展方向</h1>
                <p class="subtitle">选择一个适合你的网红类别</p>
                <div id="category-list" class="category-list">
                    <!-- 动态生成类别卡片 -->
                </div>
            </div>
        </div>

        <!-- 平台选择界面 -->
        <div id="platform-screen" class="screen">
            <div class="content-box">
                <h1 class="title">选择起步平台</h1>
                <p class="subtitle">不同平台有不同的特点和机会，选择后可在游戏中切换</p>
                <div id="platform-list" class="platform-list">
                    <!-- 动态生成平台卡片 -->
                </div>
            </div>
        </div>

        <!-- 主游戏界面（平台风格分页签） -->
        <div id="main-game-screen" class="screen main-game-with-tabs">
            <!-- 顶部状态栏（精简） -->
            <div class="status-bar status-bar-compact">
                <div class="status-left">
                    <div id="avatar-display" class="avatar-display" aria-label="avatar"></div>
                    <span class="influencer-name-display" id="name-display">未命名</span>
                </div>
                <div class="status-right">
                    <span id="month-display">第1月</span>
                    <button class="btn btn-small" id="save-btn">保存</button>
                    <button class="btn btn-small" id="menu-btn">菜单</button>
                    <button class="btn btn-small" id="help-btn">说明</button>
                </div>
            </div>

            <!-- 页签内容区 -->
            <div class="tab-content-area">
                <!-- 页签1：个人主页（仅展示+假推送/热搜） -->
                <div id="tab-profile" class="tab-panel tab-panel-fixed active">
                    <div class="profile-header-card">
                        <div class="profile-avatar-wrap">
                            <div id="profile-avatar" class="profile-avatar" aria-label="avatar"></div>
                        </div>
                        <div class="profile-name" id="profile-name">未命名</div>
                        <div class="profile-meta">
                            <span class="platform-tag" id="platform-display">未选择平台</span>
                            <span class="category-tag" id="category-display">未分类</span>
                            <span class="rank-tag" id="rank-display">素人</span>
                        </div>
                        <div class="profile-stats-row">
                            <div class="profile-stat">
                                <span class="profile-stat-num" id="fans-value">0</span>
                                <span class="profile-stat-label">粉丝</span>
                            </div>
                            <div class="profile-stat">
                                <span class="profile-stat-num" id="savings-value">¥0</span>
                                <span class="profile-stat-label">存款</span>
                            </div>
                            <div class="profile-stat">
                                <span class="profile-stat-num" id="violation-value">0</span>
                                <span class="profile-stat-label">违规指数</span>
                            </div>
                        </div>
                        <div class="profile-section">
                            <span class="profile-section-title">主播类型</span>
                            <div class="profile-category-display" id="profile-category">—</div>
                        </div>
                    </div>
                    <!-- 发现/动态区（与上方账号卡片区分，避免被误认为“下方又一个空白账号”） -->
                    <div class="profile-feed-section" aria-label="发现与推荐">
                        <h2 class="profile-feed-section-title">发现</h2>
                        <div class="feed-block">
                            <h3 class="feed-block-title">今日热搜</h3>
                            <ul class="feed-list">
                                <li class="feed-item"><span class="feed-rank">1</span> 某顶流官宣恋情 爆</li>
                                <li class="feed-item"><span class="feed-rank">2</span> 新剧开播话题破亿 热</li>
                                <li class="feed-item"><span class="feed-rank">3</span> 美食探店翻车引争议 新</li>
                                <li class="feed-item"><span class="feed-rank">4</span> 平台新规影响创作者 新</li>
                                <li class="feed-item"><span class="feed-rank">5</span> 素人逆袭涨粉百万 热</li>
                            </ul>
                        </div>
                        <div class="feed-block">
                            <h3 class="feed-block-title">推荐关注</h3>
                            <ul class="feed-list">
                                <li class="feed-item feed-item-sub">同领域优质创作者 · 可借鉴</li>
                                <li class="feed-item feed-item-sub">平台官方活动 · 流量扶持</li>
                                <li class="feed-item feed-item-sub">热门话题 · 可参与创作</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 页签2：消息（固定高度与其它页签一致） -->
                <div id="tab-messages" class="tab-panel tab-panel-fixed">
                    <div class="messages-page-header">
                        <h2 class="messages-page-title">消息</h2>
                    </div>
                    <div class="messages-categories">
                        <button type="button" class="message-category-card" id="message-btn">
                            <div class="message-category-icon message-category-icon-pink">❤</div>
                            <span class="message-category-label">小助理来信</span>
                            <span class="message-badge-large" id="message-badge" style="display: none;">0</span>
                        </button>
                        <div class="message-category-card message-category-card-static">
                            <div class="message-category-icon message-category-icon-blue">👤</div>
                            <span class="message-category-label">新增关注</span>
                            <span class="message-category-value" id="monthly-fan-gain">+0</span>
                        </div>
                        <button type="button" class="message-category-card" id="trigger-event-comment-btn">
                            <div class="message-category-icon message-category-icon-green">💬</div>
                            <span class="message-category-label">评论与事件</span>
                            <span class="message-badge-large" id="events-pending-badge" style="display: none;">0</span>
                        </button>
                    </div>
                    <div class="messages-list-hint">
                        <p>点击「小助理来信」查看商业邀约；点击「评论与事件」查看已触发的评论与事件并做出选择（事件由行动、月末等自动触发）。</p>
                    </div>
                    <div class="log-panel">
                        <h3>事件日志</h3>
                        <div id="log-content" class="log-content">
                            <p class="log-entry">游戏开始！</p>
                        </div>
                    </div>
                </div>

                <!-- 页签3：行动（属性置顶，便于根据属性选行动） -->
                <div id="tab-actions" class="tab-panel tab-panel-fixed">
                    <div class="action-attributes-block">
                        <div class="profile-section">
                            <span class="profile-section-title">角色属性</span>
                            <div id="attribute-display" class="attribute-display-list"></div>
                        </div>
                        <div class="profile-bars">
                            <div class="profile-bar-item">
                                <span class="stat-label">精力</span>
                                <div class="stat-bar"><div class="stat-fill" id="energy-bar" style="width: 80%"></div></div>
                                <span class="stat-value" id="energy-value">80/100</span>
                            </div>
                            <div class="profile-bar-item">
                                <span class="stat-label">心态</span>
                                <div class="stat-bar"><div class="stat-fill" id="mood-bar" style="width: 80%"></div></div>
                                <span class="stat-value" id="mood-value">80/100</span>
                            </div>
                            <div class="profile-bar-item">
                                <span class="stat-label">内容质量</span>
                                <div class="stat-bar"><div class="stat-fill stat-fill-blue" id="quality-bar" style="width: 20%"></div></div>
                                <span class="stat-value" id="quality-value">20/100</span>
                            </div>
                            <div class="profile-bar-item">
                                <span class="stat-label">人设契合</span>
                                <div class="stat-bar"><div class="stat-fill stat-fill-blue" id="persona-bar" style="width: 20%"></div></div>
                                <span class="stat-value" id="persona-value">20/100</span>
                            </div>
                        </div>
                    </div>
                    <div class="action-panel">
                        <h3>本月行动</h3>
                        <p class="tip" id="action-limit-tip">本月行动次数：0/5</p>
                        <button class="btn btn-platform-manage" id="platform-manage-btn">
                            <div class="platform-manage-icon" id="platform-manage-icon">🎵</div>
                            <div class="platform-manage-content">
                                <div class="platform-manage-title" id="platform-manage-title">平台管理</div>
                                <div class="platform-manage-subtitle" id="platform-manage-subtitle">切换平台 · 多开账号</div>
                            </div>
                            <div class="platform-manage-arrow">›</div>
                        </button>
                        <div id="action-list" class="action-list">
                            <!-- 动态生成行动按钮 -->
                        </div>
                        <button class="btn btn-primary btn-wide" id="next-month-btn">结算本月</button>
                    </div>
                </div>
            </div>

            <!-- 底部页签导航（小红书风格） -->
            <nav class="bottom-tab-nav">
                <button type="button" class="bottom-tab-item active" data-tab="tab-profile" aria-label="个人主页">
                    <span class="bottom-tab-icon">👤</span>
                    <span class="bottom-tab-label">个人主页</span>
                </button>
                <button type="button" class="bottom-tab-item" data-tab="tab-messages" aria-label="消息">
                    <span class="bottom-tab-icon">💬</span>
                    <span class="bottom-tab-label">消息</span>
                </button>
                <button type="button" class="bottom-tab-item" data-tab="tab-actions" aria-label="行动">
                    <span class="bottom-tab-icon">⚡</span>
                    <span class="bottom-tab-label">行动</span>
                </button>
            </nav>
        </div>

        <!-- 事件弹窗 -->
        <div id="event-modal" class="modal">
            <div class="modal-content">
                <button class="modal-close" id="event-close-btn" aria-label="关闭">×</button>
                <h2 id="event-title">事件标题</h2>
                <p id="event-description">事件描述</p>
                <div id="event-options" class="event-options">
                    <!-- 动态生成选项按钮 -->
                </div>
            </div>
        </div>

        <!-- 游戏结束弹窗 -->
        <div id="gameover-modal" class="modal">
            <div class="modal-content">
                <h2 id="gameover-title">游戏结束</h2>
                <p id="gameover-reason">结束原因</p>
                <div id="gameover-stats">
                    <!-- 最终数据统计 -->
                </div>
                <button class="btn btn-primary" id="restart-btn">重新开始</button>
            </div>
        </div>

        <!-- 月度总结弹窗 -->
        <div id="monthly-modal" class="modal">
            <div class="modal-content">
                <h2>月度总结</h2>
                <div id="monthly-content"></div>
                <button class="btn btn-primary" id="monthly-confirm-btn">确认</button>
            </div>
        </div>

        <!-- 创角鼓励弹窗 -->
        <div id="intro-modal" class="modal">
            <div class="modal-content intro-modal-content">
                <h2 class="intro-title">🎬 欢迎来到网红模拟经营</h2>
                <div class="intro-body">
                    <p class="intro-highlight">从素人到顶流，你的网红之路即将开启！</p>
                    <div class="intro-path">
                        <div class="intro-step">
                            <div class="intro-step-icon">📱</div>
                            <div class="intro-step-text">
                                <strong>素人</strong> → 初级达人<br>
                                <span>1000粉丝 + 内容质量30</span>
                            </div>
                        </div>
                        <div class="intro-step">
                            <div class="intro-step-icon">📈</div>
                            <div class="intro-step-text">
                                <strong>初级达人</strong> → 中级达人<br>
                                <span>5000粉丝 + 内容质量50</span>
                            </div>
                        </div>
                        <div class="intro-step">
                            <div class="intro-step-icon">💼</div>
                            <div class="intro-step-text">
                                <strong>中级达人</strong> → 高级达人<br>
                                <span>2万粉丝 + 内容质量70</span>
                            </div>
                        </div>
                        <div class="intro-step">
                            <div class="intro-step-icon">🌟</div>
                            <div class="intro-step-text">
                                <strong>高级达人</strong> → 头部达人<br>
                                <span>10万粉丝 + 内容质量90</span>
                            </div>
                        </div>
                        <div class="intro-step">
                            <div class="intro-step-icon">👑</div>
                            <div class="intro-step-text">
                                <strong>头部达人</strong> → MCN签约<br>
                                <span>50万粉丝 + 内容质量110 + 收益10万</span>
                            </div>
                        </div>
                    </div>
                    <div class="intro-tips">
                        <p><strong>💡 成长秘诀：</strong></p>
                        <ul>
                            <li>保持内容质量与人设契合，积累进度</li>
                            <li>平衡收益与口碑，避免违规</li>
                            <li>管理精力与存款，避免猝死或破产</li>
                            <li>善用属性优势，把握商业机会</li>
                        </ul>
                    </div>
                    <p class="intro-footer">准备好了吗？从素人逆袭成为顶流！</p>
                </div>
                <button class="btn btn-primary" id="intro-confirm-btn">开始起号</button>
            </div>
        </div>

        <!-- 说明弹窗 -->
        <div id="help-modal" class="modal">
            <div class="modal-content">
                <button class="modal-close" id="help-close-btn" aria-label="关闭">×</button>
                <h2>游戏说明</h2>
                <div class="help-tabs">
                    <button class="help-tab active" data-tab="help-attrs">属性</button>
                    <button class="help-tab" data-tab="help-rules">规则</button>
                    <button class="help-tab" data-tab="help-growth">成长</button>
                </div>

                <div id="help-attrs" class="help-panel active">
                    <div class="help-card">
                        <div class="help-icon">✨</div>
                        <div>
                            <h3>角色属性</h3>
                            <p>创角随机生成，影响收益与事件表现。</p>
                        </div>
                    </div>
                    <div class="help-grid">
                        <div class="help-item">
                            <div class="help-item-icon">😍</div>
                            <div class="help-item-title">颜值</div>
                            <div class="help-item-desc">粉丝增长与变现效率提升</div>
                        </div>
                        <div class="help-item">
                            <div class="help-item-icon">🎓</div>
                            <div class="help-item-title">学历</div>
                            <div class="help-item-desc">内容质量提升，科普类加权</div>
                        </div>
                        <div class="help-item">
                            <div class="help-item-icon">😂</div>
                            <div class="help-item-title">幽默</div>
                            <div class="help-item-desc">互动与粉丝增长提升</div>
                        </div>
                        <div class="help-item">
                            <div class="help-item-icon">🌟</div>
                            <div class="help-item-title">气质</div>
                            <div class="help-item-desc">人设契合提升，美妆/生活加权</div>
                        </div>
                        <div class="help-item">
                            <div class="help-item-icon">📷</div>
                            <div class="help-item-title">镜头感</div>
                            <div class="help-item-desc">内容表现与粉丝增长提升</div>
                        </div>
                    </div>
                </div>

                <div id="help-rules" class="help-panel">
                    <div class="help-card">
                        <div class="help-icon">📜</div>
                        <div>
                            <h3>核心规则</h3>
                            <p>稳住精力与存款，避免违规与崩盘。</p>
                        </div>
                    </div>
                    <div class="help-grid">
                        <div class="help-item">
                            <div class="help-item-icon">⚡</div>
                            <div class="help-item-title">精力</div>
                            <div class="help-item-desc">归零触发猝死事件</div>
                        </div>
                        <div class="help-item">
                            <div class="help-item-icon">🧠</div>
                            <div class="help-item-title">心态</div>
                            <div class="help-item-desc">过低会游戏结束</div>
                        </div>
                        <div class="help-item">
                            <div class="help-item-icon">💰</div>
                            <div class="help-item-title">存款</div>
                            <div class="help-item-desc">归零资金链断裂</div>
                        </div>
                        <div class="help-item">
                            <div class="help-item-icon">🎬</div>
                            <div class="help-item-title">行动次数</div>
                            <div class="help-item-desc">每月最多5次</div>
                        </div>
                        <div class="help-item">
                            <div class="help-item-icon">⚠️</div>
                            <div class="help-item-title">擦边试探</div>
                            <div class="help-item-desc">高收益高风险，影响口碑</div>
                        </div>
                    </div>
                </div>

                <div id="help-growth" class="help-panel">
                    <div class="help-card">
                        <div class="help-icon">🚀</div>
                        <div>
                            <h3>成长路径</h3>
                            <p>从素人到MCN签约，步步为营。</p>
                        </div>
                    </div>
                    <div class="help-timeline">
                        <div class="timeline-step">
                            <div class="step-badge">1</div>
                            <div>
                                <div class="step-title">内容积累</div>
                                <div class="step-desc">提升内容质量与人设，稳定涨粉</div>
                            </div>
                        </div>
                        <div class="timeline-step">
                            <div class="step-badge">2</div>
                            <div>
                                <div class="step-title">事件取舍</div>
                                <div class="step-desc">把握机会，兼顾短期与长期</div>
                            </div>
                        </div>
                        <div class="timeline-step">
                            <div class="step-badge">3</div>
                            <div>
                                <div class="step-title">职级突破</div>
                                <div class="step-desc">满足进度与门槛条件晋升</div>
                            </div>
                        </div>
                        <div class="timeline-step">
                            <div class="step-badge">4</div>
                            <div>
                                <div class="step-title">顶级签约</div>
                                <div class="step-desc">达成MCN签约胜利</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 晋升提示弹窗 -->
        <div id="rankup-modal" class="modal">
            <div class="modal-content">
                <button class="modal-close" id="rankup-close-btn" aria-label="关闭">×</button>
                <h2 id="rankup-title">职级晋升</h2>
                <p id="rankup-desc"></p>
                <button class="btn btn-primary" id="rankup-confirm-btn">知道了</button>
            </div>
        </div>

        <!-- 事件结果反馈弹窗 -->
        <div id="result-modal" class="modal">
            <div class="modal-content result-modal-content">
                <h2 class="result-title">📊 选择结果</h2>
                <div id="result-content" class="result-content">
                    <!-- 动态生成结果内容 -->
                </div>
                <button class="btn btn-primary" id="result-confirm-btn">确认</button>
            </div>
        </div>

        <!-- 合作对象选择弹窗（合作类选项的二级选择） -->
        <div id="partner-picker-modal" class="modal">
            <div class="modal-content partner-picker-content">
                <h2 class="partner-picker-title">选择合作对象</h2>
                <p class="partner-picker-desc">选一个这次要合作的对象吧（谐音梗款）</p>
                <div id="partner-picker-list" class="partner-picker-list"></div>
                <button type="button" class="btn btn-secondary" id="partner-picker-cancel">取消</button>
            </div>
        </div>

        <!-- 助理消息弹窗 -->
        <div id="messages-modal" class="modal">
            <div class="modal-content messages-modal-content">
                <button class="modal-close" id="messages-close-btn" aria-label="关闭">×</button>
                <h2 class="messages-title">📱 小助理来信</h2>
                <div class="messages-subtitle">你的专属助理为你整理了这些重要消息</div>
                <div id="messages-list" class="messages-list">
                    <!-- 动态生成消息列表 -->
                </div>
            </div>
        </div>

        <!-- 评论与事件二级界面（事件中心） -->
        <div id="events-panel-modal" class="modal">
            <div class="modal-content events-panel-content">
                <button class="modal-close" id="events-panel-close" aria-label="关闭">×</button>
                <div class="events-panel-header">
                    <h2 class="events-panel-title">💬 评论与事件</h2>
                    <p class="events-panel-desc">选择一条待处理事件，查看详情并做出选择</p>
                </div>
                <div id="events-panel-list" class="events-panel-list">
                    <!-- 动态填充事件卡片 -->
                </div>
                <div id="events-panel-empty" class="events-panel-empty" style="display: none;">
                    <div class="events-panel-empty-icon">📭</div>
                    <p id="events-panel-empty-text" class="events-panel-empty-text">暂无待处理事件</p>
                    <p id="events-panel-empty-hint" class="events-panel-empty-hint">事件会在执行行动、月末结算等时机自动触发，届时会出现在这里。</p>
                </div>
                <button type="button" class="btn btn-secondary btn-wide" id="events-panel-close-btn">返回</button>
            </div>
        </div>

        <!-- 菜单弹窗 -->
        <div id="menu-modal" class="modal">
            <div class="modal-content">
                <h2>游戏菜单</h2>
                <button class="btn btn-wide" id="load-btn">读取存档</button>
                <button class="btn btn-wide" id="new-game-btn">新游戏</button>
                <button class="btn btn-wide" id="close-menu-btn">返回游戏</button>
            </div>
        </div>

    </div>

    <!-- 脚本加载 -->
    <script src="js/config.js"></script>
    <script src="js/events.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/game.js"></script>
    <script src="js/ui.js"></script>
</body>
</html>
