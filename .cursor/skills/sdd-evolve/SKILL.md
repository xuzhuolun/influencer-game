---
name: sdd-evolve
description: 用开发过程中的发现更新规格。在实现揭示新需求、约束或设计变更时使用。
---

# SDD 演进技能

保持规格与实现发现同步。

## 何时使用

- 实现揭示新需求
- 开发过程中发现技术约束
- 基于学习需要设计变更
- 发现原始规格中没有的边界情况
- 实现过程中做出架构决策

## 演进协议

### 步骤 1：识别发现
分类变更：
- **发现**: 之前未知的新信息
- **细化**: 对现有需求的澄清
- **新增**: 原始范围中没有的新需求
- **修改**: 对现有需求的变更
- **移除**: 不再需要的需求

### 步骤 2：评估影响
1. 哪些规格文件受影响？
2. 这会改变方案吗？
3. 有下游影响吗？
4. 实现是否应该暂停等待审查？

### 步骤 3：记录变更
添加变更日志条目：
- 变更了什么
- 为什么变更
- 对现有工作的影响
- 做出的决策

### 步骤 4：更新规格
修改相应文件：
- `spec.md` 用于需求变更
- `plan.md` 用于架构变更
- `tasks.md` 用于任务调整
- `todo-list.md` 用于新增/移除项

## 变更记录格式

添加到相关规格文件：

```markdown
## 变更日志

### [日期] - [类别]: [简要描述]

**上下文**: [为什么需要此变更]

**变更**: [具体变更了什么]

**影响**: [如何影响现有工作]

**决策**: [决定了什么以及由谁决定]

---
[之前的变更日志条目...]
```

## 演进类别

### 发现
```markdown
### [日期] - 发现: [标题]
**上下文**: 在实现 [任务] 过程中，发现 [发现]
**变更**: 在规格中添加了 [新需求/约束]
**影响**: [最小/中等/重大] - [说明]
**决策**: 继续采用 [方案]
```

### 细化
```markdown
### [日期] - 细化: [标题]
**上下文**: 原始需求 "[X]" 不明确
**变更**: 澄清为 [具体解释]
**影响**: 无 - 与现有实现一致
**决策**: 更新规格以提高清晰度
```

### 新增
```markdown
### [日期] - 新增: [标题]
**上下文**: [为什么需要新需求]
**变更**: 添加了 [新功能/约束] 的需求
**影响**: [需要新任务 / 时间线调整]
**决策**: [已批准 / 需要范围讨论]
```

### 修改
```markdown
### [日期] - 修改: [标题]
**上下文**: 原始方案 [X] 不可行，因为 [原因]
**变更**: 从 [旧] 改为 [新]
**影响**: [需要返工 / 受影响的任务]
**决策**: [新方案的理由]
```

### 移除
```markdown
### [日期] - 移除: [标题]
**上下文**: [为什么不再需要该需求]
**变更**: 移除了 [需求/功能]
**影响**: [可以跳过的任务 / 简化]
**决策**: [谁批准了移除]
```

## 最佳实践

1. **立即记录** - 不要等到实现结束
2. **具体明确** - 包含足够细节以便日后理解
3. **链接上下文** - 引用相关任务或讨论
4. **评估影响** - 如果需要审查才能继续则标记
5. **保留历史** - 不要删除，始终添加变更日志

## 集成

- 在 `sdd-implementer` 子代理工作期间调用
- 由 `/evolve` 命令触发
- 与 `sdd-verifier` 配合验证变更
- 输入到未来的 `/audit` 运行
- 如果变更需要利益相关者输入则使用提问工具
