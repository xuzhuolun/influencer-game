# Issue #1 解决方案：文件过大

## 问题陈述
spec.md、plan.md 和 task.md 的结果文件对于简单实现来说过大，导致：
- Token 消耗过高
- 冗长且难以阅读的文档
- 过度的规划开销

## 实施的解决方案

### 1. Token 优化（减少 65%）
**之前:**
- spec-template.md：83 行
- plan-template.md：125 行
- tasks-template.md：159 行
- **总计：367 行**

**之后:**
- spec-compact.md：40 行
- plan-compact.md：55 行
- tasks-compact.md：42 行
- **总计：137 行（减少 65%）**

### 2. SDD 2.5 轻量级方法
**适用于 80% 的功能：**
- 单个 `feature-brief.md`（约 40 行）
- 30 分钟规划 → 开始编码
- 使用 `/evolve` 维护活文档

**适用于 20% 的复杂功能：**
- 需要时可使用完整 SDD 2.0 工作流程
- 紧凑模板减少 Token 使用

### 3. 应用的具体优化

#### 简洁语言
- **之前**: "我们要解决什么问题？受影响的用户是谁？"
- **之后**: "问题 | 用户 | 价值"

#### 缩写字段
- **之前**: "验收标准", "依赖项", "预估工作量"
- **之后**: "AC", "Deps", "Effort"

#### 内联格式  
- **之前**: 带标题的多行部分
- **之后**: `键: 值 | 键: 值` 内联格式

### 4. JSON 替代方案
对于极端 Token 效率，可使用 JSON 格式：
```json
{
  "must_have": [{"req": "功能", "criteria": "验收标准"}],
  "stories": [{"role": "用户", "action": "想要", "outcome": "结果"}]
}
```

## 结果

| 指标 | 之前 | 之后 | 改进 |
|--------|--------|-------|-------------|
| **每个规格的行数** | 83 | 40 | 减少 52% |
| **每个计划的行数** | 125 | 55 | 减少 56% |
| **每个任务的行数** | 159 | 42 | 减少 74% |
| **简单功能总计** | 367 | 40（简报） | 减少 89% |
| **Token 成本** | 高 | 低 | 节省 65-89% |

## 使用建议

### 简单功能（80% 的情况）
使用 `/brief` 命令：
```bash
/brief feature-name description
```
创建单个 40 行的 feature-brief.md

### 复杂功能（20% 的情况）
使用紧凑模板：
- 在 .sdd/config.json 中自动配置
- 比原始模板小 65%
- 完整功能保留

## 状态: ✅ 已解决

- **Token 使用**: 大幅减少
- **文件大小**: 减少 65-89%
- **功能性**: 完全保留
- **敏捷兼容性**: 大幅改进

## 额外优势
- 编写和阅读更快
- 更适合 AI 处理
- 更具可操作性的内容
- 更少的认知负担

## 实施日期
2024 年 9 月 20 日

## 相关改进
- SDD 2.5 方法论（30 分钟规划）
- 使用 `/evolve` 维护活文档
- 使用 `/upgrade` 无缝升级