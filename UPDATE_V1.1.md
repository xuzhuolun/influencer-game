# 更新说明 v1.1

## 更新日期
2026-02-09

## 核心变更：擦边机制改革

### 变更理由
根据用户反馈，原先的擦边累计次数机制过于复杂，且惩罚过重。将擦边改为普通事件类型，简化游戏机制。

---

## 详细变更内容

### 1. 移除擦边累计统计系统

#### 数据字段变更
- ❌ 移除 `edgeCount`（擦边次数）字段
- ❌ 移除擦边相关惩罚系数

**影响文件**：
- `js/config.js` - initialData
- `js/game.js` - 游戏状态对象

### 2. 删除擦边惩罚机制

#### 移除的惩罚规则
- ❌ 5次警告（降低粉丝增长率、增加违规风险）
- ❌ 10次降级（强制降低职级）
- ❌ 15次封号（游戏结束）

#### 移除的方法
- ❌ `handleEdge()` - 处理擦边惩罚
- ❌ `demoteRank()` - 强制降级
- ❌ `generateEdgeExclusiveEvent()` - 生成专属擦边事件

**影响文件**：
- `js/config.js` - edgeRule 配置项
- `js/game.js` - 相关处理方法

### 3. 事件系统重构

#### 事件类型调整
**修改前**：
- 正向事件（33%）
- 负向事件（34%）
- 擦边事件（33%）

**修改后**：
- 正向事件（40%）
- 负向事件（60%，包含原擦边内容）

#### 擦边事件合并
原来的擦边事件选项现在作为普通负向选项，保留在负向事件中：

| 类别 | 原擦边事件 | 新处理方式 |
|------|-----------|-----------|
| 科普类 | 玩梗科普诱惑 | 合并到负向事件，不累计次数 |
| 吃播类 | 暴食挑战邀约 | 合并到负向事件，不累计次数 |
| 美妆类 | 低俗妆容建议 | 合并到负向事件，不累计次数 |
| 生活类 | 低俗内容诱惑 | 合并到负向事件，不累计次数 |

#### 选项效果调整
**修改前**（擦边选项）：
```javascript
{
    text: "尝试一下，增加趣味性（擦边）",
    effects: { fans: 300, contentQuality: -10, edgeCount: 1 },
    type: 'edge'
}
```

**修改后**（负向选项）：
```javascript
{
    text: "尝试一下，增加趣味性",
    effects: { fans: 300, contentQuality: -10, personaFit: -8, rankProgress: -5 },
    type: 'negative'
}
```

**变化**：
- ✅ 去掉"（擦边）"标记
- ✅ 移除 `edgeCount: 1`
- ✅ 增加负面属性影响（人设契合、职级进度）
- ✅ 类型改为 `negative`

### 4. 晋级条件简化

#### 移除擦边限制
**修改前**：
```
初级达人：进度≥100 + 违规<10 + 擦边<5 + 粉丝≥1000
中级达人：进度≥250 + 违规<15 + 擦边<8 + 粉丝≥5000 + 1次正向事件
高级达人：进度≥500 + 违规<20 + 擦边<10 + 粉丝≥20000 + 无职级违规
头部达人：进度≥1000 + 违规<25 + 擦边<10 + 粉丝≥100000 + 2次高级正向事件
MCN签约：进度≥1800 + 违规<30 + 擦边<10 + 粉丝≥500000 + 收益≥100000
```

**修改后**：
```
初级达人：进度≥100 + 违规<10 + 粉丝≥1000
中级达人：进度≥250 + 违规<15 + 粉丝≥5000 + 1次正向事件
高级达人：进度≥500 + 违规<20 + 粉丝≥20000 + 无职级违规
头部达人：进度≥1000 + 违规<25 + 粉丝≥100000 + 2次高级正向事件
MCN签约：进度≥1800 + 违规<30 + 粉丝≥500000 + 收益≥100000
```

**影响文件**：
- `js/config.js` - rankConfig
- `js/game.js` - checkRankUpConditions()

### 5. 评分系统调整

#### 月度评分计算
**修改前**：
```javascript
score = 内容质量×0.3 + 人设契合×0.3 + 心态×0.2 + 精力×0.2 
        - 违规指数 - 擦边次数×2
```

**修改后**：
```javascript
score = 内容质量×0.3 + 人设契合×0.3 + 心态×0.2 + 精力×0.2 
        - 违规指数
```

**影响文件**：
- `js/game.js` - calculateMonthlyScore()

### 6. UI界面调整

#### 数值面板
**移除显示**：
- ❌ "擦边次数" 统计框

**修改前**（4个统计框）：
```
[粉丝数] [累计收益] [违规指数] [擦边次数]
```

**修改后**（3个统计框）：
```
[粉丝数] [累计收益] [违规指数]
```

#### CSS样式调整
```css
/* 修改前 */
.stat-row {
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
}

/* 修改后 */
.stat-row {
    grid-template-columns: repeat(3, 1fr);
}
```

#### 游戏结束统计
移除擦边次数显示

**影响文件**：
- `index.html` - 移除擦边次数元素
- `js/ui.js` - 移除相关更新代码
- `css/style.css` - 调整grid布局

### 7. 事件日志优化

#### 日志类型调整
**修改前**：
- `positive` - 正向（绿色）
- `negative` - 负向（红色）
- `warning` - 擦边警告（黄色）

**修改后**：
- `positive` - 正向（绿色）
- `negative` - 负向（红色）

**影响**：
- 原擦边事件现在按负向事件记录
- 移除黄色警告日志

---

## 游戏体验变化

### 优化点
1. ✅ **简化机制**：不再需要担心擦边累计次数
2. ✅ **降低难度**：移除严厉的擦边惩罚（降级、封号）
3. ✅ **更自由**：玩家可以更自由地选择事件选项
4. ✅ **更直观**：UI更简洁，减少一个统计维度

### 平衡性调整
1. **负向事件概率增加**：从34%提升到60%
   - 原因：合并了擦边事件，保持整体难度
   
2. **负向选项效果增强**：
   - 原擦边选项增加了额外的负面影响
   - 例如：降低人设契合、扣除职级进度
   
3. **晋级难度降低**：
   - 移除擦边次数限制
   - 只需关注违规指数和其他条件

### 策略建议
1. **大胆选择**：不用担心累计惩罚，每次事件独立考虑
2. **权衡利弊**：负向选项通常有短期收益但长期损失
3. **稳健发展**：优先选择正向选项，积累职级进度
4. **避免违规**：违规指数仍然是晋级的重要限制

---

## 兼容性说明

### 存档兼容
⚠️ **旧版本存档可能不兼容**

旧存档包含 `edgeCount` 字段，新版本会忽略该字段，不会导致错误，但建议：
- 开始新游戏获得最佳体验
- 或在游戏菜单中清除旧存档

### 浏览器缓存
更新后请：
1. 按 **Ctrl+F5** 强制刷新页面
2. 或清除浏览器缓存

---

## 文件变更清单

### 修改的文件
- ✅ `js/config.js` - 移除 edgeCount、edgeRule，调整事件概率
- ✅ `js/game.js` - 删除擦边处理方法，合并事件，调整评分和晋级条件
- ✅ `js/ui.js` - 移除擦边次数显示和更新
- ✅ `index.html` - 移除擦边次数UI元素
- ✅ `css/style.css` - 调整grid布局

### 新增的文件
- ✅ `UPDATE_V1.1.md` - 本更新说明

---

## 测试建议

### 功能测试
1. ✅ 开始新游戏，确认没有擦边次数显示
2. ✅ 触发负向事件，选择原"擦边"选项
3. ✅ 验证不会累计擦边次数
4. ✅ 验证晋级不检查擦边限制
5. ✅ 验证月度评分不包含擦边惩罚

### 回归测试
- ✅ 基础游戏流程（起名→选类别→行动→结算）
- ✅ 事件系统（正向/负向事件触发）
- ✅ 职级晋升系统
- ✅ 存档加载系统

---

## 版本对比

| 功能 | v1.0 | v1.1 |
|------|------|------|
| 擦边次数统计 | ✅ | ❌ |
| 擦边惩罚机制 | ✅（5次警告，10次降级，15次封号） | ❌ |
| 事件类型 | 3种（正向/负向/擦边） | 2种（正向/负向） |
| 专属事件数量 | 12个（4类×3类型） | 8个（4类×2类型） |
| 晋级擦边限制 | ✅ | ❌ |
| UI统计框 | 4个 | 3个 |
| 负向事件概率 | 34% | 60% |

---

## 后续计划

### v1.2 规划
- 🔄 增加更多事件类型
- 🔄 优化事件内容多样性
- 🔄 添加成就系统
- 🔄 优化游戏平衡性

### 反馈渠道
如有问题或建议，欢迎反馈！

---

**更新完成！祝游戏愉快！** 🎉
