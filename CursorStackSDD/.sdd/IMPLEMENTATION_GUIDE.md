# 实现指南

## 关键：遵循 Todo 列表

**对 AI 助手和开发者的重要提示：**  
Todo 列表不是可选的建议——它是**必须系统化执行的检查清单**。

## 实现规则

### 1. Todo 列表是强制性的
- **每一项任务**都必须处理
- **完成后勾选**对应项目
- **记录阻塞**如果无法完成某项
- **持续更新进度**

### 2. 顺序执行
```markdown
## 实现进度

### 阶段 1：环境搭建
- [x] 安装依赖
- [x] 创建项目结构
- [ ] 配置环境变量（当前）

### 阶段 2：核心功能
- [ ] 实现认证服务
- [ ] 构建用户管理
- [ ] 创建 API 端点
```

### 3. 不能跳过任务
**当遇到 todo 项时：**
- ✅ **完成它** - 标记为完成 [x]
- 🔄 **阻塞它** - 记录原因：`- [ ] 任务 (BLOCKED: 原因)`
- 📝 **更新它** - 如果方案变更：`- [x] 任务 (MODIFIED: 新方案)`
- ❌ **绝不跳过** - 每一项都需要明确处理

### 4. 进度跟踪格式

```markdown
## 当前状态
**阶段**: 2/4 (核心功能)
**进度**: 12/35 个任务完成 (34%)
**阻塞**: 2 项等待 API 密钥
**下一步**: 实现认证服务

## 今日完成
- [x] 数据库 schema 设计
- [x] 用户模型实现
- [x] 密码哈希服务

## 进行中
- [ ] 🔄 JWT token 生成 (50% - 正在写测试)

## 已阻塞
- [ ] 🚫 OAuth 集成 (等待客户端凭据)
- [ ] 🚫 邮件服务 (SMTP 配置待定)
```

## 针对 AI 助手（Cursor、ChatGPT、Claude）

### 关键指令

1. **开始前阅读完整的 todo 列表**
2. **按顺序执行 todos** - 遵守依赖关系
3. **标记完成** - 工作时更新复选框
4. **记录变更** - 记录任何偏离计划的情况
5. **跳过前先询问** - 绝不悄悄忽略任务

### 执行模式

```
步骤 1: 阅读 todo 列表
步骤 2: 识别下一个未完成的任务
步骤 3: 完整执行该任务
步骤 4: 更新复选框: - [ ] → - [x]
步骤 5: 记录任何问题或变更
步骤 6: 重复直到所有任务完成
```

### AI 响应示例

```markdown
我正在系统地执行 todo 列表：

## 任务 1：创建用户模型 ✅
创建了 user.model.ts，包含字段：id, email, password, createdAt
- [x] 使用 Prisma schema 创建用户模型

## 任务 2：实现密码哈希 🔄
使用 bcrypt，盐轮次为 10
- [x] 安装 bcrypt 依赖
- [ ] 创建哈希服务（进行中）

## 阻塞: 无
## 下一步: 完成哈希服务，然后进入 JWT 生成
```

## 针对人工开发者

### 工作流程

1. **打开 todo 列表**与代码编辑器并排
2. **选择下一个任务**从当前阶段
3. **完整完成任务**再继续下一个
4. **更新复选框**在 todo-list.md 中
5. **提交时引用**：`git commit -m "feat: user model [TODO-001]"`
6. **每日跟踪进度**

### 每日站会模板

```markdown
## 每日进度报告

**日期**: 2024-09-20
**开发者**: @username

### 昨日完成
- [x] 用户认证服务
- [x] JWT token 生成
- [x] 登录端点

### 今日目标  
- [ ] 密码重置流程
- [ ] 邮箱验证
- [ ] 速率限制

### 阻塞
- 部署密码重置前需要安全审查

### 统计
- 完成任务: 15/35 (43%)
- 是否按计划: 是
- 预计剩余: 5 天
```

## 应避免的反模式

### ❌ 不要：悄悄跳过 todos
```markdown
"我来实现认证系统"
[只实现了登录，忽略了注册、密码重置等]
```

### ✅ 要：明确遵循 todos
```markdown
"我按照 todo 列表实现认证：
- [x] 阶段 1：用户模型
- [x] 阶段 2：哈希服务  
- [ ] 阶段 3：登录端点（当前）
- [ ] 阶段 4：注册
- [ ] 阶段 5：密码重置"
```

### ❌ 不要：把 todos 当建议
```markdown
"这里有个更好的方案（忽略计划）"
```

### ✅ 要：方案变更时更新计划
```markdown
"我发现任务 3 有更好的方案。
原方案：使用 bcrypt
新方案：使用 argon2（更安全）
更新 todo 并说明理由，然后执行"
```

## 与 SDD 命令集成

### `/brief` → 实现
功能简报包含"下一步行动"部分 - 这些成为你的初始 todos

### `/tasks` → 实现  
tasks.md 成为你的完整 todo 列表

### `/implement` → 执行
从 tasks 生成 todo-list.md，然后系统化执行

### `/evolve` → 更新
发现新情况时更新简报/todos

## 验证清单

在标记实现"完成"之前：

- [ ] 所有 todos 已勾选或明确阻塞
- [ ] 阻塞项已记录解决方案
- [ ] 所有完成功能的测试通过
- [ ] 代码已对照原始规格审查
- [ ] 文档已更新
- [ ] 没有悄悄偏离计划
- [ ] 全程跟踪了进度

## 紧急情况：计划偏离

如果发现计划有误：

1. **停止** - 不要悄悄偏离
2. **记录** - 解释为什么计划行不通
3. **更新** - 使用 `/evolve` 更新规格
4. **修订** - 用新方案更新 todo 列表
5. **继续** - 系统化执行新计划

## 成功指标

**好的实现：**
- ✅ 所有 todos 已处理（完成或明确处理）
- ✅ 持续跟踪进度  
- ✅ 偏离有记录和理由
- ✅ 阻塞项已识别和上报
- ✅ 完成了最终验证

**差的实现：**
- ❌ Todos 被忽略或当作可选
- ❌ 悄悄偏离计划
- ❌ 进度跟踪不完整
- ❌ 阻塞项未记录
- ❌ "我按自己的方式做"