---
description: "[L2-GameKit] DataAsset é…ç½®è§„èŒƒ - æ•°æ®èµ„äº§è®¾è®¡å’Œç®¡ç†"
globs:
  - "**/*.uasset"
  - "**/Data/**/*"
  - "**/Config/**/*"
alwaysApply: false
tags: gamekit, dataasset, constraint
level: L2
scope: gamekit-framework
---

# [L2-GameKit] DataAsset é…ç½®è§„èŒƒ

> **å±‚çº§**: L2 (å­ç³»ç»Ÿè§„åˆ™)
> **ç±»å‹**: `constraint` | **é€‚ç”¨ç‰ˆæœ¬**: UE5.7
> **é€‚ç”¨èŒƒå›´**: `gamekit-framework` - ä½¿ç”¨ GameKitCore æ¡†æ¶çš„é¡¹ç›®

---

## 1. é…ç½®åŒ–è®¾è®¡åŸåˆ™

### [Constraint] æ ¸å¿ƒåŸåˆ™
*   **[Constraint]** é…ç½®ä¼˜å…ˆäºç¡¬ç¼–ç 
*   **[Constraint]** æ•°æ®èµ„äº§å®šä¹‰"æ˜¯ä»€ä¹ˆ"ï¼Œä»£ç å®šä¹‰"æ€ä¹ˆåš"
*   **[Constraint]** æ‰€æœ‰å¯è°ƒæ•´çš„æ•°å€¼éƒ½åº”å¯é…ç½®

---

## 2. æ ¸å¿ƒ DataAsset ç±»å‹

### PawnData - è§’è‰²é…ç½®

```cpp
UCLASS(BlueprintType)
class UGameKitPawnData : public UPrimaryDataAsset
{
    // Pawn ç±»
    UPROPERTY(EditDefaultsOnly, Category = "Pawn")
    TSubclassOf<APawn> PawnClass;
    
    // è¾“å…¥é…ç½®
    UPROPERTY(EditDefaultsOnly, Category = "Input")
    TObjectPtr<UGameKitInputConfig> InputConfig;
    
    // ç›¸æœºé…ç½®
    UPROPERTY(EditDefaultsOnly, Category = "Camera")
    TObjectPtr<UGameKitCameraMode> DefaultCameraMode;
    
    // åˆå§‹èƒ½åŠ›é›†ï¼ˆå¯é€‰ï¼‰
    UPROPERTY(EditDefaultsOnly, Category = "Abilities")
    TArray<TObjectPtr<UGameKitAbilitySet>> AbilitySets;
};
```

### InputConfig - è¾“å…¥é…ç½®

```cpp
UCLASS(BlueprintType)
class UGameKitInputConfig : public UDataAsset
{
    // InputAction åˆ° GameplayTag çš„æ˜ å°„
    UPROPERTY(EditDefaultsOnly, Category = "Input")
    TArray<FGameKitInputAction> NativeInputActions;
    
    // Ability è§¦å‘çš„è¾“å…¥
    UPROPERTY(EditDefaultsOnly, Category = "Input")
    TArray<FGameKitInputAction> AbilityInputActions;
};
```

---

## 3. å‘½åè§„èŒƒ

### [Constraint] èµ„äº§å‘½å

| ç±»å‹ | å‰ç¼€ | ç¤ºä¾‹ |
|------|------|------|
| PawnData | `PD_` | `PD_DefaultHero`, `PD_Enemy_Goblin` |
| InputConfig | `IC_` | `IC_Default`, `IC_Vehicle` |
| CameraMode | `CM_` | `CM_ThirdPerson`, `CM_TopDown` |
| AbilitySet | `AS_` | `AS_CommonAbilities`, `AS_CombatAbilities` |
| ExperienceDefinition | `EXP_` | `EXP_MainMenu`, `EXP_Combat` |
| GameFeatureData | `GFD_` | `GFD_Combat`, `GFD_Inventory` |

### [Constraint] å­˜æ”¾è·¯å¾„

```
Content/
â”œâ”€â”€ Logic/
â”‚   â”œâ”€â”€ Experiences/       # Experience èµ„äº§
â”‚   â”‚   â””â”€â”€ EXP_*.uasset
â”‚   â”œâ”€â”€ PawnData/          # PawnData èµ„äº§
â”‚   â”‚   â””â”€â”€ PD_*.uasset
â”‚   â”œâ”€â”€ Input/             # è¾“å…¥é…ç½®
â”‚   â”‚   â””â”€â”€ IC_*.uasset
â”‚   â””â”€â”€ Camera/            # ç›¸æœºé…ç½®
â”‚       â””â”€â”€ CM_*.uasset
â””â”€â”€ Data/
    â””â”€â”€ DataTables/        # æ•°æ®è¡¨
```

---

## 4. è½¯å¼•ç”¨ vs ç¡¬å¼•ç”¨

### [Constraint] å¼•ç”¨è§„åˆ™
*   **[Constraint]** å¤§èµ„æºï¼ˆMeshã€Textureã€Soundï¼‰ä½¿ç”¨è½¯å¼•ç”¨
*   **[Constraint]** å°é…ç½®ï¼ˆDataAssetã€DataTableï¼‰å¯ä½¿ç”¨ç¡¬å¼•ç”¨
*   **[Constraint]** è·¨æ¨¡å—å¼•ç”¨ä¼˜å…ˆä½¿ç”¨è½¯å¼•ç”¨

```cpp
// âœ… æ­£ç¡®ï¼šå¤§èµ„æºä½¿ç”¨è½¯å¼•ç”¨
UPROPERTY(EditDefaultsOnly)
TSoftObjectPtr<USkeletalMesh> CharacterMesh;

// âœ… æ­£ç¡®ï¼šå°é…ç½®å¯ä½¿ç”¨ç¡¬å¼•ç”¨
UPROPERTY(EditDefaultsOnly)
TObjectPtr<UGameKitInputConfig> InputConfig;
```

### [Constraint] è½¯å¼•ç”¨æ£€æŸ¥ï¼ˆé‡è¦ï¼ï¼‰
*   **[Constraint]** ä½¿ç”¨ `IsNull()` æ£€æŸ¥æ˜¯å¦é…ç½®
*   **[Constraint]** ç¦æ­¢ä½¿ç”¨ `IsValid()` æ£€æŸ¥è½¯å¼•ç”¨

```cpp
// âŒ é”™è¯¯ï¼šIsValid() ä¼šè¯¯åˆ¤æœªåŠ è½½çš„èµ„äº§
if (!SoftRef.IsValid()) { return; }

// âœ… æ­£ç¡®ï¼šIsNull() åªæ£€æŸ¥æ˜¯å¦é…ç½®
if (SoftRef.IsNull()) { return; }
UObject* Loaded = SoftRef.LoadSynchronous();
```

---

## 5. æ•°æ®è¡¨ (DataTable) è§„èŒƒ

### [Constraint] DataTable ä½¿ç”¨åœºæ™¯
*   **[Constraint]** æ‰¹é‡é…ç½®æ•°æ®ä½¿ç”¨ DataTable
*   **[Constraint]** éœ€è¦ç­–åˆ’é¢‘ç¹è°ƒæ•´çš„æ•°å€¼

### [Constraint] è¡Œç»“æ„å®šä¹‰

```cpp
USTRUCT(BlueprintType)
struct FMyTableRow : public FTableRowBase
{
    GENERATED_BODY()
    
    UPROPERTY(EditAnywhere, BlueprintReadOnly)
    FName RowName;
    
    UPROPERTY(EditAnywhere, BlueprintReadOnly)
    float Value;
};
```

---

## 6. ä¸ Experience/GameFeature çš„å…³ç³»

```
Experience
    â”‚
    â”œâ”€â”€ å¼•ç”¨ PawnDataï¼ˆå®šä¹‰é»˜è®¤è§’è‰²ï¼‰
    â”‚
    â””â”€â”€ å¼•ç”¨ GameFeatureï¼ˆå®šä¹‰åŠŸèƒ½æ¨¡å—ï¼‰
            â”‚
            â””â”€â”€ å¼•ç”¨ AbilitySetï¼ˆå®šä¹‰èƒ½åŠ›ï¼‰

PawnData
    â”‚
    â”œâ”€â”€ å¼•ç”¨ InputConfigï¼ˆå®šä¹‰è¾“å…¥ï¼‰
    â”‚
    â””â”€â”€ å¼•ç”¨ CameraModeï¼ˆå®šä¹‰ç›¸æœºï¼‰
```

---

## âœ… æ£€æŸ¥æ¸…å•

- [ ] èµ„äº§å‘½åç¬¦åˆå‰ç¼€è§„èŒƒ
- [ ] èµ„äº§å­˜æ”¾åœ¨æ­£ç¡®çš„è·¯å¾„
- [ ] å¤§èµ„æºä½¿ç”¨è½¯å¼•ç”¨
- [ ] è½¯å¼•ç”¨æ£€æŸ¥ä½¿ç”¨ `IsNull()` è€Œé `IsValid()`
- [ ] å¯è°ƒæ•´çš„æ•°å€¼å·²é…ç½®åŒ–

---

**è®°ä½**ï¼š
- ğŸ¯ **é…ç½®ä¼˜å…ˆ**ï¼šæ•°æ®èµ„äº§å®šä¹‰ï¼Œä»£ç å®ç°
- ğŸ¯ **å‘½åè§„èŒƒ**ï¼šç»Ÿä¸€å‰ç¼€ä¾¿äºè¯†åˆ«
- ğŸ¯ **è½¯å¼•ç”¨é™·é˜±**ï¼šä½¿ç”¨ IsNull() æ£€æŸ¥

---

**å±‚çº§**: L2-GameKit | **æœ€åæ›´æ–°**: 2026å¹´2æœˆ
